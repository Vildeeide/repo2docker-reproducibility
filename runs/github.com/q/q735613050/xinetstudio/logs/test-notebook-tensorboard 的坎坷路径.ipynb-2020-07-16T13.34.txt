[I 200716 13:35:10 inrepo:36] Testing notebook tensorboard çš„åå·è·¯å¾„.ipynb
[I 200716 13:35:11 inrepo:45] Found kernel python3
[I 200716 13:35:11 execute:404] Executing notebook with kernel: python3
Traceback (most recent call last):
  File "/src/inrepo.py", line 114, in <module>
    main()
  File "/src/inrepo.py", line 110, in main
    test_f(opts.test, opts.output_dir)
  File "/src/inrepo.py", line 75, in run_notebook
    nb, cwd=os.path.dirname(nb_path), kernel_name=kernel_name, timeout=600
  File "/srv/conda/envs/notebook/lib/python3.7/site-packages/nbconvert/preprocessors/execute.py", line 737, in executenb
    return ep.preprocess(nb, resources, km=km)[0]
  File "/srv/conda/envs/notebook/lib/python3.7/site-packages/nbconvert/preprocessors/execute.py", line 405, in preprocess
    nb, resources = super(ExecutePreprocessor, self).preprocess(nb, resources)
  File "/srv/conda/envs/notebook/lib/python3.7/site-packages/nbconvert/preprocessors/base.py", line 69, in preprocess
    nb.cells[index], resources = self.preprocess_cell(cell, resources, index)
  File "/srv/conda/envs/notebook/lib/python3.7/site-packages/nbconvert/preprocessors/execute.py", line 448, in preprocess_cell
    raise CellExecutionError.from_cell_and_msg(cell, out)
nbconvert.preprocessors.execute.CellExecutionError: An error occurred while executing the following cell:
------------------
import tensorflow as tf

g = tf.Graph()  # åˆ›å»ºä¸€ä¸ªGraphå¯¹è±¡

with g.as_default():   # å°† Graphå¯¹è±¡ è®¾ä¸ºé»˜è®¤ Graphå¯¹è±¡
    with tf.name_scope('variables'):
        # è®°å½•æ•°æ®æµå›¾è¿è¡Œæ¬¡æ•°çš„ Variable å¯¹è±¡
        # è¿™æ˜¯ä¸€ç§å¸¸è§çš„èŒƒå¼ï¼Œåœ¨æ•´ä¸ªAPIä¸­ï¼Œè¿™ç§èŒƒå¼ä¼šé¢‘ç¹å‡ºç°
        global_step = tf.Variable(0, dtype= tf.float32, trainable= False, name= 'global_step')
        
        # è¿½è¸ªè¯¥æ¨¡å‹çš„æ‰€æœ‰è¾“å‡ºéšæ—¶é—´çš„ç´¯åŠ å’Œçš„ Variable å¯¹è±¡
        total_output = tf.Variable(0.0, dtype= tf.float32, trainable= False, name= 'total_output')
        
        
    with tf.name_scope('transformation'):  # è¯¥æ¨¡å‹çš„æ ¸å¿ƒå˜æ¢éƒ¨åˆ†
        
        # ç‹¬ç«‹çš„è¾“å…¥å±‚
        with tf.name_scope('input'):
            # åˆ›å»ºè¾“å‡ºå ä½ç¬¦ï¼Œç”¨äºæ¥æ”¶ä»»æ„é•¿åº¦çš„å‘é‡
            a = tf.placeholder(tf.float32, shape= [None], name= 'input_placeholder_a')
            
        # ç‹¬ç«‹çš„ä¸­é—´å±‚
        with tf.name_scope('intermediate_layer'):
            # å¯¹æ•´ä¸ªå‘é‡å®æ–½ä¹˜æ³•å’ŒåŠ æ³•
            b = tf.reduce_prod(a, name= 'prod_b')
            c = tf.reduce_sum(a, name= 'sum_c')
            
        # ç‹¬ç«‹çš„è¾“å‡ºå±‚
        with tf.name_scope('output'):
            output = tf.add(b, c, name= 'output')
        
        # å¯¹å˜é‡è¿›è¡Œæ›´æ–°
        with tf.name_scope('update'):
            # ç”¨æœ€æ–°çš„è¾“å‡ºæ›´æ–°Variableå¯¹è±¡total_output
            update_total = total_output.assign(output)
            # å°†Variableå¯¹è±¡global_stepå¢ 1 ï¼Œåªè¦æ•°æ®æµå›¾è¿è¡Œï¼Œè¯¥æ“ä½œä¾¿éœ€è¦è¿›è¡Œ
            increment_step = global_step.assign_add(1)
            
        with tf.name_scope('summaries'):
            avg = tf.div(update_total, tf.cast(increment_step, tf.float32), name= 'average')
            
            # ä¸ºè¾“å‡ºèŠ‚ç‚¹åˆ›å»ºæ±‡æ€»æ•°æ®
            tf.summary.scalar('Output', output)
            tf.summary.scalar('Sum of outputs over time', update_total)
            tf.summary.scalar('Average of outputs over time', avg)
            
        with tf.name_scope('global_ops'):
            # åˆå§‹åŒ–Op
            init = tf.global_variables_initializer()
            # å°†æ‰€æœ‰æ±‡æ€»æ•°æ®åˆå¹¶åˆ°ä¸€ä¸ªOpä¸­
            merged_summaries = tf.summary.merge_all()
            
sess = tf.Session(graph= g)
# ä¿å­˜æ±‡æ€»æ•°æ®
writer = tf.summary.FileWriter('E:/Graphs/xin_graph', g)
sess.run(init)
def run_graph(input_tensor):
    '''
    è¿è¡Œè®¡ç®—å›¾
    '''
    feed_dict = {a: input_tensor}
    _, step, summary = sess.run([output, increment_step, merged_summaries],feed_dict= feed_dict)

    writer.add_summary(summary, global_step= step)
# ç”¨ä¸åŒçš„è¾“å…¥è¿è¡Œè¯¥æ•°æ®æµå›¾
run_graph([2, 8])
run_graph([3, 1, 3, 3])
run_graph([8])
run_graph([1, 2, 3])
run_graph([11, 4])
run_graph([4, 1])
run_graph([7, 3, 1])
run_graph([6, 3])
run_graph([0, 2])
run_graph([4, 5 ,6])

writer.flush()      # å°†æ±‡æ€»æ•°æ®å†™å…¥ç£ç›˜
writer.close()
sess.close()
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mModuleNotFoundError[0m                       Traceback (most recent call last)
[0;32m<ipython-input-1-e051fbcac413>[0m in [0;36m<module>[0;34m[0m
[0;32m----> 1[0;31m [0;32mimport[0m [0mtensorflow[0m [0;32mas[0m [0mtf[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m      2[0m [0;34m[0m[0m
[1;32m      3[0m [0mg[0m [0;34m=[0m [0mtf[0m[0;34m.[0m[0mGraph[0m[0;34m([0m[0;34m)[0m  [0;31m# åˆ›å»ºä¸€ä¸ªGraphå¯¹è±¡[0m[0;34m[0m[0;34m[0m[0m
[1;32m      4[0m [0;34m[0m[0m
[1;32m      5[0m [0;32mwith[0m [0mg[0m[0;34m.[0m[0mas_default[0m[0;34m([0m[0;34m)[0m[0;34m:[0m   [0;31m# å°† Graphå¯¹è±¡ è®¾ä¸ºé»˜è®¤ Graphå¯¹è±¡[0m[0;34m[0m[0;34m[0m[0m

[0;31mModuleNotFoundError[0m: No module named 'tensorflow'
ModuleNotFoundError: No module named 'tensorflow'


Container exited with status: {'Error': None, 'StatusCode': 1}
